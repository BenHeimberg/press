# Guide

**NuxtPress** is a microframework that leverages the [Nuxt module system][1]. It will automatically register routes, templates and configuration options in your Nuxt application, depending on how you configure it. It also takes care of loading Markdown files, rendering them and making the pre-rendered static files available.

[1]: https://nuxtjs.org/guide/modules/

## Setup

Install via [npm](http://npmjs.com) or [yarn](https://yarnpkg.com/):

```shell
$ npm install nuxt @nuxt/press
$ yarn add nuxt @nuxt/press
```

Note that you must also install [Nuxt][nuxt] if you haven't already.

[nuxt]: https://nuxtjs.org

## Configuration

First, **NuxtPress** needs to be enabled via `nuxt.config.js`:

```js
export default {
  modules: ['@nuxt/press']
}
```

This will start NuxtPress in its **default mode**, where all bundled apps can be selectively enabled based on the presence of the `docs/`, `blog/` and `slides/` directories. In **default mode**, the URL prefix for each bundled app matches these directories, .e.g, blog will be able available at `/blog`.

> In a freshly started project, `npm install` (or `yarn add`) will automatically create that `nuxt.config.js` file for you if you haven't already. 

Alternatively, you can also do:

```js
export default {
  modules: [
    ['@nuxt/press', '<mode>']
  ]
}
```

This will start NuxtPress in **docs standalone mode**: 

```js
export default {
  modules: [
    ['@nuxt/press', 'docs']
  ]
}
```

> That's the only allowed NuxtPress configuration via `nuxt.config.js`. For everything else, use either `nuxt.press.json` or `nuxt.press.js`, covered in the next topic.

In docs standalone mode, there's no URL prefix, so here docs will be available at `/`, not `/docs`, and Markdown files can be placed directly on `<srcDir`>. 

Standalone mode works similarly for `blog` and `slides`, as will be shown later.

### Configuration files

You can configure NuxtPress in one of two ways: via `nuxt.press.json`, an autogenerated config file containing most common (JSON-serializable) options, or via `nuxt.press.js`, a full-blown JavaScript configuration file.

> `nuxt.press.js` will always take precedence over `nuxt.press.json`

The `nuxt.press.json` file autogenerated for [this documentation][docs-source] can be seen below. The `nav` key is initially empty and must be filled out.

[docs-source]: https://github.com/nuxt/press/tree/master/demo/docs

```json
{
  "docs": {
    "dir": "docs",
    "prefix": "/",
    "title": "NuxtPress documentation",
    "nav": [
      { "Home": "/" },
      { "Internals": "/internals" },
      { "GitHub": "https://github.com/nuxt/press" }
    ],
    "sidebar": [
      "/",
      "/guide"
    ]
  }
}
```

## Default mode

The first thing to keep in mind is that **NuxtPress** can be added to and seamlessly extend any existing Nuxt application. **A NuxtPress app is a Nuxt app**. As long as it's the last enabled module, it won't interfere with existing functionality.

To add new routes to a Nuxt application, you can use the **`pages/`** folder. Nuxt will dynamically build your routes based on the hierarchy of this folder.

In **default mode**, in addition to now being able to add Markdown files directly to `pages/`, **you have three new route folders to work with**: **`docs/`**, **`blog/`** and **`slides/`**.  The presence of any of these directories in the **`srcDir`** of a Nuxt project will enable their corresponding NuxtPress modes. 

You can customize these directories as follows:

```json
{
  "docs": {
    "dir": "my-custom-docs-dir"
  },
  "blog": {
    "dir": "my-custom-blog-dir"
  },
  "slides": {
    "dir": "my-custom-slides-dir"
  }
}
```

> You can run multiple NuxtPress modes in the same Nuxt app.

## Standalone mode

You've seen briefly how to specify which bundled app should be loaded by passing a mode parameter to the `@nuxt/press` definition in `nuxt.config.js`. 

**Standalone mode** basically tells NuxtPress two things:  you're only using **one of the available bundled apps** and the URL prefix for  the URLs generated by the app bundle **should be `/`**, i.e., mixed with those that result from files being placed under the `pages/` directory.

That means if you're running `blog` in **standalone mode**:

```js
export default {
  modules: [
    ['@nuxt/press', 'blog']
  ]
}
```

And you have a `pages/index.vue` file, that is effectively overriding the index blog view. On the other hand, if you have `pages/about.md`, that will be available as `/about` and the blog index will be available at `/`.

Depending on the standalone mode you choose, Markdown files are searched for in different directories, as detailed below:

Standalone mode | Lookup directories  
--------------- | ----------------------------------------
`docs`          | `<srcDir>` **or** `<srcDir>/docs`
`blog`          | `<srcDir>/entries` **or** `<srcDir>/posts`
`slides`        | `<srcDir>` **or** `<srcDir>/slides`

You can also set the standalone app via `nuxt.press.json`:

```json
{
  "mode": "slides"
}
```

Or via `nuxt.press.js`:

```js
export default {
  mode: 'slides'
}
```

## Publishing docs

In docs mode, NuxtPress will automatically detects the presence of a **`README.md`** file or an **`index.md`** file in the configured lookup directory and make that the *introductory page* of your docs suite.

As you saw before, the URL prefix is automaticaly determined by whether you're running docs mode in NuxtPress standalone or default mode (`/` vs `/docs`).  You can override this by manually setting `docs.prefix` in the configuration:


```json
{
  "docs": {
    "prefix": "/custom-docs-prefix/"
  }
}
```

NuxtPress has full support for Markdown via [`@nuxt/markdown`][nm].

[nm]: https://github.com/nuxt/markdown

### Header links

The links you see on the top right corner of this page are added via NuxtPress
configuration. Use the `docs.nav` configuration key, as follows:

```json
{
  "docs": {
    "nav": [
      {
        "text": "Home",
        "link": "/"
      },
      {
        "text": "Internals",
        "link": "/internals"
      },
      {
        "text": "GitHub",
        "link": "https://github.com/nuxt/press"
      }
    ]
  }
}
```

You can also use a shorthand syntax as follows:

```json
{
  "docs": {
    "nav": [
      {"Home": "/"},
      {"Internals": "/internals"},
      {"GitHub": "https://github.com/nuxt/press"}
    ]
  }
}
```

### Table of contents

The docs bundled app also includes a sidebar component that can automatically scroll topics into view when you click them, and highlights which topic is currently into view. To enable the table of contents:

```
{
  "docs": {
    "sidebar": [
      "/",
      "/guide",
      "/customize"
    ]
  }
}
```

See the full configuration for this documentation suite [here][docs-config].

[docs-config]: https://github.com/nuxt/press/blob/master/docs/nuxt.press.json

## Publishing blogs

You can structure Markdown files for the blog mode (under the configured lookup directory) in however many subdirectories you want (for grouping posts by year of publication for, for instance). What determines the publishing date of each blog entry is actually their Markdown source header.

By default, NuxtPress uses a simple format where the first line is parsed out as the publication date. **Titles** and **slugs** are automatically generated from the first heading (`#`) of your Markdown sources:

```
June 20, 2019

# Blog Entry's Title

```

If your Markdown sources however start with a `---`, NuxtPress will try and parse it via [gray-matter][gm] and will look for `title`, `slug` and `date`.

[gm]: https://github.com/jonschlinkert/gray-matter

```markup
---
title: Blog Entry's Title
date: June 20, 2019
slug: blog-entry-slug
---

# This Heading Is Not Used As Title

```

### Adding sidebar links

NuxtPress' default blog template makes it easy to automatically include sidebar text links.

Here's `nuxt.press.json` from [`examples/blog`][examples-blog].

[examples-blog]:  https://github.com/nuxt/press/tree/master/examples/blog

```json
{
  "blog": {
    "links": [
      {"Home": "/blog"},
      {"Archive": "/blog/archive"},
      {"About": "/blog/about"},
    ]
  }
}
```

This feature is mostly illustrative. You're likely to benefit more from ejecting the entire app bundle and adding your code for the `sidebar` component. Your component can still have access to these options you define under the `blog` configuration key in `nuxt.press.json` or `nuxt.press.js`, making it extremely to customize templates even with your own configuration options.

## Publishing slides

NuxtPress will parse each slide from Markdown using `#` as the delimiter. If text follows `#`, it's appended as a `<h1>` tag. If not, it's simply used as the delimiter and no `<h1>` tag is added.

The following example represents four slides. It is a single file, but here it is shown divided in sections to illustrate the processing.

```md

My Presentation
(opener, slide 1)

```
```md
# Slide 2 header

Slide 2 text

```
```md
#

Slide 3 text
(slide with no header)

```
```md
# Slide 4 header

Slide 4 text

```

This is a simplification from [MDX][mdx], which uses `---` as delimiter.

[mdx]: https://mdxjs.com/
