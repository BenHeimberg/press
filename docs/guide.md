# Guide

**NuxtPress** is a microframework that leverages the [Nuxt module
system][1]. It will automatically register routes, templates and configuration 
options in your Nuxt application, depending on how you configure it. It also 
takes care of loading Markdown files, rendering them and making the 
pre-rendered static files available.

[1]: https://nuxtjs.org/guide/modules/

## Setup

Install via [npm](http://npmjs.com) or [yarn](https://yarnpkg.com/):

```shell
$ npm install nuxt @nuxt/press
$ yarn add nuxt @nuxt/press
```

Note that you must also install [Nuxt][nuxt] if you haven't already.

[nuxt]: https://nuxtjs.org

## Configuration

First, **NuxtPress** needs to be enabled via `nuxt.config.js`:

```js
export default {
  modules: ['@nuxt/press']
}
```

In a freshly started project, `npm install` (or `yarn add`) will automatically
create that `nuxt.config.js` file for you if you haven't already. 

You can configure NuxtPress in one of two ways: via `nuxt.press.json`, an
autogenerated config file containing most common (JSON-serializable) options,
or via `nuxt.press.js`, a full-blown JavaScript configuration file.

> `nuxt.press.js` will always take precedence over `nuxt.press.json`

The `nuxt.press.json` file autogenerated for [this documentation][docs-source] 
can be seen below. The `nav` key is initially empty and must be filled out.

[docs-source]: https://github.com/nuxt/press/tree/master/demo/docs

```js
{
  "docs": {
    "dir": "docs",
    "prefix": "/",
    "title": "NuxtPress documentation",
    "nav": [
      { "Home": "/" },
      { "Internals": "/internals" },
      { "GitHub": "https://github.com/nuxt/press" }
    ],
    "sidebar": [
      "/",
      "/guide"
    ]
  }
}
```

## Runtime modes

The first thing to keep in mind is that **NuxtPress** can be added to and
seamlessly extend any existing Nuxt application. **A NuxtPress app is a Nuxt
app**. As long as it's the last enabled module, it won't interfere with
existing functionality.

To add new routes to a Nuxt application, you can use the **`pages/`** folder.
Nuxt will dynamically build your routes based on the hierarchy of this folder.

In addition to now being able to add Markdown files directly to `pages/`, 
**you have three new route folders to work with**: **`docs/`**, **`blog/`** 
and **`slides/`**. 

The presence of any of these directories in the **`srcDir`** of a Nuxt project 
will enable their corresponding NuxtPress modes. You can customize these 
directories via **`nuxt.press.json`**:

```js
{
  "docs": {
    "dir": 'my-custom-docs-dir'
  },
  "blog": {
    "dir": 'my-custom-blog-dir'
  },
  "slides": {
    "dir": 'my-custom-slides-dir'
  }
}
```

## Publishing docs

To publish a documentation suite, you can either add your Markdown files to 
`<srcDir>` itself, or to `<srcDir>/docs/`. 

When Markdown files are in the root directory and no other route directories 
(`pages/`, `blog/`, `slides/`) have been added, NuxtPress will automatically
enable **docs single-mode** and the root URL for the documentation suite will 
be `/`. If however you add Markdown files to `<srcDir>/docs`, the root URL for 
the documentation suite will be `/docs`, as to avoid interfering  with existing
application routes. You can customize this via `nuxt.press.json`:

```js
{
  "docs": {
    "prefix": "/custom-docs-prefix/"
  }
}
```

NuxtPress will automatically detect the presence of a **`README.md`** file or an
**`index.md`** file and make that the *introductory page* of your docs suite.

NuxtPress has full support for Markdown via [`@nuxt/markdown`][nm].

[nm]: https://github.com/nuxt/markdown

## Publishing blogs

To publish a blog, add your Markdown files to the `blog/` folder. You can
structure them in however many subdirectories you want (for grouping posts by
year of publication for, for instance). What determines the publishing date of
each blog entry is actually their Markdown source header.

By default, NuxtPress uses a simple format where the first line is parsed out
as the publication date. **Titles** and **slugs** are automatically generated
from the first heading (`#`) of your Markdown sources:

```
June 20, 2019

# Blog Entry's Title

```

If your Markdown sources however start with a `---`, NuxtPress will try and
parse it via [gray-matter][gm] and will look for `title`, `slug` and `date`.

[gm]: https://github.com/jonschlinkert/gray-matter

```markup
---
title: Blog Entry's Title
date: June 20, 2019
slug: blog-entry-slug
---

# This Heading Is Not Used As Title

```

### Adding sidebar links

NuxtPress' default blog template makes it easy to automatically include
sidebar text links, and also includes some predefined SVG icons for common
links like *RSS feed*, *Twitter*, *GitHub* and *LinkedIn*.

Here's `nuxt.press.json` from [`examples/blog`][examples-blog].

[examples-blog]:  https://github.com/nuxt/press/tree/master/examples/blog

```js
{
  "blog": {
    "links": [
      {"Home": "/blog"},
      {"Archive": "/blog/archive"},
      {"About": "/blog/about"},
    ],
    "icons": [
      {"github": "http://github.com/nuxt/nuxt.js"},
      {"twitter": "https://twitter.com/nuxt_js"}
    ]
  }
}
```

Currently the **feed**, **twitter**, **github** and **linkedin** icons are available.

You can also completely customize your blog template, and define your very own
configuration properties and use them in your custom templates.

See more about customization.

## Publishing slides

To publish a slideshow, add your Markdown file to the `slides/` folder.
NuxtPress will parse each slide from Markdown using `#` as the delimiter.

If text follows `#`, it's appended as a `<h1>` tag. If not, it's simply used
as the delimiter and no `<h1>` tag is added.

The following example represents four slides:

```markup
My Presentation
(opener, slide 1)

# Slide 2 header

Slide 2 text

#

Slide 3 text
(slide with no header)

# Slide 4 header

Slide 4 text
```

This is a simplification from [MDX][mdx], which uses `---` as delimiter.

[mdx]: https://mdxjs.com/

## Using components

First list the components in `nuxt.config.js` as follows:

```js
export default {
  press: {
    components: {
      ColorPicker: '@radial-color-picker/vue-color-picker'
    }
  }
}
```

> If needed, you can enable the `sanitize` option for `@nuxt/markdown` globally.

Since NuxtPress operates under the assumption all Markdown is provided by the
author (and not via third-party user submission), sources are processed in full
(tags included), with a couple of caveats:

1. Can't use self-closing tags, i.e., **this won't work**:

```markup
<color-picker />
```

But **this will**:

```markup
<color-picker></color-picker>
```

2. When placing Markdown inside a component, it must be preceded and followed
by an empty line, otherwise the whole block is treated as custom HTML.

**This won't work**:

```markup
<div class="note">
*Markdown* and <em>HTML</em>.
</div>
```

But **this will**:

```markup
<div class="note">

*Markdown* and <em>HTML</em>.

</div>
```

As will **this**:

```markup
<span class="note">*Markdown* and <em>HTML</em>.</span>
```

This last example works because `<span>` is not a block-level tag.

> Under the hood, NuxtPress uses [rehype-raw][rehype-raw] for this.

[rehype-raw]: https://github.com/rehypejs/rehype-raw
