# Guide

**NuxtPress** is a microframework that leverages the [Nuxt module system][1]. It will automatically register routes, templates and configuration options in your Nuxt application, depending on how you configure it. It also takes care of loading Markdown files, rendering them and making the pre-rendered static files available.

[1]: https://nuxtjs.org/guide/modules/

## Setup

Install via [npm](http://npmjs.com) or [yarn](https://yarnpkg.com/):

```shell
$ npm install nuxt @nuxt/press
$ yarn add nuxt @nuxt/press
```

Note that you must also install [Nuxt][nuxt] if you haven't already.

[nuxt]: https://nuxtjs.org

## Configuration

First, **NuxtPress** needs to be enabled via `nuxt.config.js`:

```js
export default {
  modules: ['@nuxt/press']
}
```

This will start NuxtPress in its **default mode**, where all bundled apps can be selectively enabled based on the presence of the `docs/`, `blog/` and `slides/` directories. In **default mode**, the URL prefix for each bundled app matches these directories, .e.g, blog will be able available at `/blog`.

> In a freshly started project, `npm install` (or `yarn add`) will automatically create that `nuxt.config.js` file for you if you haven't already. 

Alternatively, you can also do:

```js
export default {
  modules: [
    ['@nuxt/press', 'docs']
  ]
}
```

Now this will start NuxtPress in **docs standalone mode**. In standalone mode, there's no URL prefix, so in this example, docs will be available at `/`, not `/docs`, and Markdown files can be placed directly on `<srcDir`>.

You'll see more about **standalone mode** later on.

### Configuration files

You can configure NuxtPress in one of two ways: via `nuxt.press.json`, an autogenerated config file containing most common (JSON-serializable) options, or via `nuxt.press.js`, a full-blown JavaScript configuration file.

> `nuxt.press.js` will always take precedence over `nuxt.press.json`

The `nuxt.press.json` file autogenerated for [this documentation][docs-source] can be seen below. The `nav` key is initially empty and must be filled out.

[docs-source]: https://github.com/nuxt/press/tree/master/demo/docs

```json
{
  "docs": {
    "dir": "docs",
    "prefix": "/",
    "title": "NuxtPress documentation",
    "nav": [
      { "Home": "/" },
      { "Internals": "/internals" },
      { "GitHub": "https://github.com/nuxt/press" }
    ],
    "sidebar": [
      "/",
      "/guide"
    ]
  }
}
```

## Default mode

The first thing to keep in mind is that **NuxtPress** can be added to and seamlessly extend any existing Nuxt application. **A NuxtPress app is a Nuxt app**. As long as it's the last enabled module, it won't interfere with existing functionality.

To add new routes to a Nuxt application, you can use the **`pages/`** folder. Nuxt will dynamically build your routes based on the hierarchy of this folder.

In addition to now being able to add Markdown files directly to `pages/`, **you have three new route folders to work with**: **`docs/`**, **`blog/`** and **`slides/`**. 

In the **default mode**, the presence of any of these directories in the **`srcDir`** of a Nuxt project will enable their corresponding NuxtPress modes. You can customize these directories via **`nuxt.press.json`**:

```json
{
  "docs": {
    "dir": "my-custom-docs-dir"
  },
  "blog": {
    "dir": "my-custom-blog-dir"
  },
  "slides": {
    "dir": "my-custom-slides-dir"
  }
}
```

> You can run multiple NuxtPress modes in the same Nuxt app.

## Standalone mode

When no route directories are found in `<srcDir>`, NuxtPress will start in standalone `docs` mode. It will try and load Markdown files from `<srcDir>` and make the **documentation suite app** available at `/`.

You can modify the default app for standalone mode via `nuxt.config.js`:

```js
export default {
  modules: [
    ['@nuxt/press', 'slides']
  ]
}
```

> That's the only allowed NuxtPress configuration via `nuxt.config.js`. For everything else, use either `nuxt.press.json` or `nuxt.press.js`.

Via `nuxt.press.json`:

```json
{
  "mode": "slides"
}
```

Or via `nuxt.press.js`:

```js
export default {
  mode: 'slides'
}
```

## Publishing docs

To publish a documentation suite, you can either add your Markdown files to `<srcDir>` itself, or to `<srcDir>/docs/`. 

When Markdown files are in the root directory and no other route directories (`pages/`, `blog/`, `slides/`) have been added, NuxtPress will automatically enable **docs single-mode** and the root URL for the documentation suite will be `/`. If however you add Markdown files to `<srcDir>/docs`, the root URL for the documentation suite will be `/docs`, as to avoid interfering  with existing application routes. You can customize this via `nuxt.press.json`:

```json
{
  "docs": {
    "prefix": "/custom-docs-prefix/"
  }
}
```

NuxtPress will automatically detect the presence of a **`README.md`** file or an **`index.md`** file and make that the *introductory page* of your docs suite.

NuxtPress has full support for Markdown via [`@nuxt/markdown`][nm].

[nm]: https://github.com/nuxt/markdown

## Publishing blogs

To publish a blog, add your Markdown files to the `blog/` folder. You can structure them in however many subdirectories you want (for grouping posts by year of publication for, for instance). What determines the publishing date of each blog entry is actually their Markdown source header.

By default, NuxtPress uses a simple format where the first line is parsed out as the publication date. **Titles** and **slugs** are automatically generated from the first heading (`#`) of your Markdown sources:

```
June 20, 2019

# Blog Entry's Title

```

If your Markdown sources however start with a `---`, NuxtPress will try and parse it via [gray-matter][gm] and will look for `title`, `slug` and `date`.

[gm]: https://github.com/jonschlinkert/gray-matter

```markup
---
title: Blog Entry's Title
date: June 20, 2019
slug: blog-entry-slug
---

# This Heading Is Not Used As Title

```

### Adding sidebar links

NuxtPress' default blog template makes it easy to automatically include sidebar text links, and also includes some predefined SVG icons for common links like *RSS feed*, *Twitter*, *GitHub* and *LinkedIn*.

Here's `nuxt.press.json` from [`examples/blog`][examples-blog].

[examples-blog]:  https://github.com/nuxt/press/tree/master/examples/blog

```js
{
  "blog": {
    "links": [
      {"Home": "/blog"},
      {"Archive": "/blog/archive"},
      {"About": "/blog/about"},
    ],
    "icons": [
      {"github": "http://github.com/nuxt/nuxt.js"},
      {"twitter": "https://twitter.com/nuxt_js"}
    ]
  }
}
```

Currently the **feed**, **twitter**, **github** and **linkedin** icons are available.

You can also completely customize your blog template, and define your very own
configuration properties and use them in your custom templates.

See more about customization.

## Publishing slides

To publish a slideshow, add your Markdown file to the `slides/` folder.
NuxtPress will parse each slide from Markdown using `#` as the delimiter.

If text follows `#`, it's appended as a `<h1>` tag. If not, it's simply used
as the delimiter and no `<h1>` tag is added.

The following example represents four slides. It is a single file, but here
it is shown divided in sections to illustrate the processing.

```md

My Presentation
(opener, slide 1)

```
```md
# Slide 2 header

Slide 2 text

```
```md
#

Slide 3 text
(slide with no header)

```
```md
# Slide 4 header

Slide 4 text

```

This is a simplification from [MDX][mdx], which uses `---` as delimiter.

[mdx]: https://mdxjs.com/
